# Disk Usage Analyzer

<div align="center">

**ä¸€ä¸ªå¼ºå¤§ã€å¿«é€Ÿã€è·¨å¹³å°çš„ç£ç›˜ç©ºé—´åˆ†æå·¥å…·**

[![Python Version](https://img.shields.io/badge/python-3.6+-blue.svg)](https://www.python.org/downloads/)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)
[![Platform](https://img.shields.io/badge/platform-Windows%20%7C%20macOS%20%7C%20Linux-lightgrey.svg)](https://github.com/coo-2022/DiskUsageAnalyzer)

åŠŸèƒ½ä¸°å¯Œ | é›¶ä¾èµ– | æ˜“äºä½¿ç”¨

</div>

## âœ¨ ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- ğŸ“Š **å¿«é€Ÿæ‰«æ** - é«˜æ•ˆéå†ç›®å½•æ ‘ï¼Œç»Ÿè®¡æ‰€æœ‰æ–‡ä»¶å’Œæ–‡ä»¶å¤¹å¤§å°
- ğŸ” **æ™ºèƒ½æ’åº** - è‡ªåŠ¨æ‰¾å‡ºå ç”¨ç©ºé—´æœ€å¤§çš„æ–‡ä»¶å¤¹å’Œæ–‡ä»¶
- ğŸ“ˆ **åˆ†ç±»ç»Ÿè®¡** - æŒ‰æ–‡ä»¶ç±»å‹åˆ†æç©ºé—´å ç”¨æƒ…å†µ
- ğŸ¨ **å¯è§†åŒ–æŠ¥å‘Š** - æ¸…æ™°çš„ç»ˆç«¯è¡¨æ ¼è¾“å‡ºï¼Œå¸¦è¿›åº¦æ¡
- ğŸš€ **ç¼“å­˜æœºåˆ¶** - åŠ é€ŸäºŒæ¬¡æ‰«æï¼Œä¿å­˜æ‰«æç»“æœ
- ğŸ” **é‡å¤æ–‡ä»¶æ£€æµ‹** - æŸ¥æ‰¾é‡å¤æ–‡ä»¶ï¼ŒèŠ‚çœç£ç›˜ç©ºé—´
- ğŸ“Š **CSV/JSONå¯¼å‡º** - å¯¼å‡ºè¯¦ç»†æŠ¥å‘Šç”¨äºæ·±å…¥åˆ†æ
- âš¡ **è·¨å¹³å°** - Windows / macOS / Linux é€šç”¨

### è¾…åŠ©å·¥å…·
- ğŸ¦€ **Rustæ¸…ç†å·¥å…·** - ä¸€é”®æ¸…ç†Rustç¼–è¯‘äº§ç‰©ï¼ˆtargetç›®å½•ï¼‰
- ğŸ§ **WSLåˆ†æå·¥å…·** - æ·±å…¥åˆ†æWSLå’ŒDockerç£ç›˜å ç”¨
- ğŸ“¦ **æ‰¹å¤„ç†è„šæœ¬** - Windowsç”¨æˆ·å¿«é€Ÿåˆ†æå·¥å…·

## ğŸ“¦ å®‰è£…

### è¦æ±‚
- Python 3.6 æˆ–æ›´é«˜ç‰ˆæœ¬
- æ— éœ€é¢å¤–ä¾èµ–ï¼ˆä»…ä½¿ç”¨Pythonæ ‡å‡†åº“ï¼‰

### å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/coo-2022/DiskUsageAnalyzer.git
cd disk_usage_analyzer
```

### éªŒè¯å®‰è£…

```bash
python main.py --help
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### åŸºæœ¬ç”¨æ³•

```bash
# åˆ†æå½“å‰ç›®å½•
python main.py

# åˆ†ææŒ‡å®šç›®å½•ï¼ˆWindowsï¼‰
python main.py C:\

# åˆ†ææŒ‡å®šç›®å½•ï¼ˆLinux/macOSï¼‰
python main.py /home/user

# æ˜¾ç¤ºå‰20ä¸ªç»“æœ
python main.py -n 20

# ä¸æ˜¾ç¤ºè¿›åº¦æ¡ï¼ˆæ›´å¿«çš„è¾“å‡ºï¼‰
python main.py --no-progress
```

### é«˜çº§ç”¨æ³•

#### 1. ä½¿ç”¨ç¼“å­˜åŠ é€Ÿ

```bash
# ç¬¬ä¸€æ¬¡æ‰«æä¼šä¿å­˜ç¼“å­˜
python main.py C:\

# ç¬¬äºŒæ¬¡ä½¿ç”¨ç¼“å­˜ï¼Œå‡ ä¹ç¬é—´å®Œæˆ
python main.py C:\ --cache

# å¼ºåˆ¶é‡æ–°æ‰«æ
python main.py C:\ --no-cache
```

#### 2. æŸ¥æ‰¾é‡å¤æ–‡ä»¶

```bash
# æŸ¥æ‰¾é‡å¤æ–‡ä»¶ï¼ˆé»˜è®¤å¤§äº1MBï¼‰
python main.py ~/Downloads --duplicates

# åªæ£€æµ‹å¤§äº10MBçš„æ–‡ä»¶
python main.py ~/Downloads --duplicates --dup-min-size 10

# æŸ¥æ‰¾æ‰€æœ‰é‡å¤æ–‡ä»¶
python main.py ~/Documents --duplicates --dup-min-size 0
```

#### 3. å¯¼å‡ºæŠ¥å‘Š

```bash
# å¯¼å‡ºCSVæ ¼å¼ï¼ˆæ–¹ä¾¿Excelæ‰“å¼€ï¼‰
python main.py C:\ --export-csv

# å¯¼å‡ºJSONæ ¼å¼
python main.py C:\ --export-json report.json

# æŒ‡å®šå¯¼å‡ºç›®å½•
python main.py C:\ --export-csv --export-dir ./reports
```

#### 4. ç»„åˆä½¿ç”¨

```bash
# åˆ†ææ•´ä¸ªDç›˜ï¼Œä½¿ç”¨ç¼“å­˜ï¼ŒæŸ¥æ‰¾é‡å¤æ–‡ä»¶ï¼Œå¯¼å‡ºæŠ¥å‘Š
python main.py D:\ --cache --duplicates --export-csv --export-json d_drive_report.json

# å¿«é€ŸæŸ¥çœ‹Top 20å¤§æ–‡ä»¶
python main.py . -n 20 --no-progress
```

## ğŸ› ï¸ è¾…åŠ©å·¥å…·

### 1. Rustæ¸…ç†å·¥å…·

è‡ªåŠ¨æŸ¥æ‰¾å¹¶æ¸…ç†Rusté¡¹ç›®çš„ç¼–è¯‘äº§ç‰©ï¼ˆtargetç›®å½•ï¼‰ï¼š

```bash
# é¢„è§ˆæ¨¡å¼ï¼ˆæŸ¥çœ‹ä¼šåˆ é™¤ä»€ä¹ˆï¼‰
python tools/clean_rust.py ~/code

# æ‰§è¡Œæ¸…ç†ï¼ˆéœ€è¦ç¡®è®¤ï¼‰
python tools/clean_rust.py ~/code --execute

# è‡ªåŠ¨ç¡®è®¤ï¼Œè·³è¿‡æç¤º
python tools/clean_rust.py ~/code --execute --yes
```

### 2. WSLåˆ†æå·¥å…·

åˆ†æWSLå’ŒDockerçš„ç£ç›˜å ç”¨ï¼ˆä»…Windowsï¼‰ï¼š

```bash
# åˆ†æWSL Ubuntuå’ŒDocker
python tools/analyze_wsl.py

# åªåˆ†æUbuntu
python tools/analyze_wsl.py --ubuntu

# åªåˆ†æDocker
python tools/analyze_wsl.py --docker

# æ˜¾ç¤ºæ¸…ç†å‘½ä»¤
python tools/analyze_wsl.py --cleanup
```

### 3. æ‰¹å¤„ç†è„šæœ¬ï¼ˆWindowsï¼‰

ç›´æ¥åŒå‡»è¿è¡Œ `tools/analyze_wsl.bat` è¿›è¡Œå¿«é€Ÿåˆ†æã€‚

## ğŸ“Š è¾“å‡ºç¤ºä¾‹

### åŸºæœ¬æŠ¥å‘Š

```
======================================================================
ğŸ“Š ç£ç›˜ä½¿ç”¨åˆ†ææŠ¥å‘Š - C:\Users\username
======================================================================

ğŸ“ˆ æ€»è§ˆ:
  æ€»å¤§å°: 800.9 GB
  æ–‡ä»¶æ•°: 2,116,211
  ç›®å½•æ•°: 333,668

ğŸ“ æœ€å¤§çš„æ–‡ä»¶å¤¹ (Top 10):
----------------------------------------------------------------------
   1. Program Files/Steam/games                 138.3 GB  17.3% â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘
   2. AppData/Local/Packages/Ubuntu              151.3 GB  18.9% â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘
   3. AppData/Local/Docker                      100.4 GB  12.5% â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘
   4. Downloads                                  16.8 GB   2.1% â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘
   ...

ğŸ“„ æœ€å¤§çš„æ–‡ä»¶ (Top 10):
----------------------------------------------------------------------
   1. AppData/.../ext4.vhdx                               151.3 GB
   2. Program Files/.../docker_data.vhdx                  100.4 GB
   3. pagefile.sys                                          22.0 GB
   ...

ğŸ“Š æ–‡ä»¶ç±»å‹ç»Ÿè®¡ (Top 10):
----------------------------------------------------------------------
   1. .vhdx                                    252.4 GB  31.5% â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
   2. .pak                                     141.2 GB  17.6% â–ˆâ–ˆâ–ˆ
   3. .dll                                      69.6 GB   8.7% â–ˆâ–ˆ
   ...
```

### é‡å¤æ–‡ä»¶æŠ¥å‘Š

```
ğŸ” é‡å¤æ–‡ä»¶æ£€æµ‹ (Top 10)
======================================================================

ğŸ“Œ é‡å¤ç»„ #1 (3 ä¸ªæ–‡ä»¶, å„ 1.2 GB)
   âš ï¸  å¯èŠ‚çœ: 2.4 GB
      1. Downloads/backup.zip
      2. Documents/backup copy.zip
      3. .temp/backup.zip

ğŸ“Œ é‡å¤ç»„ #2 (2 ä¸ªæ–‡ä»¶, å„ 450 MB)
   âš ï¸  å¯èŠ‚çœ: 450 MB
      1. Videos/movie.mp4
      2. Backup/movie.mp4

----------------------------------------------------------------------
ğŸ’° æ€»è®¡å¯èŠ‚çœç©ºé—´: 2.9 GB
======================================================================
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
disk_usage_analyzer/
â”œâ”€â”€ disk_analyzer.py          # æ ¸å¿ƒåˆ†æå¼•æ“
â”œâ”€â”€ reporter.py               # æŠ¥å‘Šç”Ÿæˆå™¨
â”œâ”€â”€ main.py                   # CLI å…¥å£
â”œâ”€â”€ tools/                    # è¾…åŠ©å·¥å…·
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ clean_rust.py         # Rustæ¸…ç†å·¥å…·
â”‚   â”œâ”€â”€ analyze_wsl.py        # WSLåˆ†æå·¥å…·
â”‚   â”œâ”€â”€ analyze_wsl_simple.py # ç®€åŒ–ç‰ˆWSLå·¥å…·
â”‚   â””â”€â”€ analyze_wsl.bat       # Windowsæ‰¹å¤„ç†è„šæœ¬
â”œâ”€â”€ .gitignore                # Gitå¿½ç•¥é…ç½®
â”œâ”€â”€ README.md                 # é¡¹ç›®æ–‡æ¡£
â””â”€â”€ LICENSE                   # MITè®¸å¯è¯
```

## ğŸ”§ æŠ€æœ¯å®ç°

### æ ¸å¿ƒæŠ€æœ¯
- **æ‰«æå¼•æ“**: ä½¿ç”¨ `os.walk()` é«˜æ•ˆéå†ç›®å½•æ ‘
- **ç¼“å­˜æœºåˆ¶**: ä½¿ç”¨ `pickle` åºåˆ—åŒ–æ‰«æç»“æœï¼ŒåŸºäºè·¯å¾„å“ˆå¸Œå­˜å‚¨
- **é‡å¤æ£€æµ‹**: å…ˆæŒ‰æ–‡ä»¶å¤§å°é¢„ç­›é€‰ï¼Œå†è®¡ç®— MD5 å“ˆå¸Œç¡®è®¤
- **å¯¼å‡ºåŠŸèƒ½**:
  - CSV: ä½¿ç”¨ `csv` æ¨¡å—ï¼ˆUTF-8-BOMç¼–ç ï¼ŒExcelå…¼å®¹ï¼‰
  - JSON: ä½¿ç”¨ `json` æ¨¡å—ï¼ŒåŒ…å«å®Œæ•´ç»Ÿè®¡ä¿¡æ¯

### æ€§èƒ½ä¼˜åŒ–
- ä»…åœ¨å†…å­˜ä¸­ä¿ç•™å¿…è¦ä¿¡æ¯ï¼ˆè·¯å¾„ã€å¤§å°ã€ä¿®æ”¹æ—¶é—´ï¼‰
- ä½¿ç”¨ç”Ÿæˆå™¨å¤„ç†å¤§å‹ç›®å½•
- æ™ºèƒ½ç¼“å­˜é¿å…é‡å¤æ‰«æ
- MD5è®¡ç®—ä»…åœ¨éœ€è¦æ—¶è¿›è¡Œ

## ğŸ›£ï¸ å¼€å‘è·¯çº¿

### å·²å®Œæˆ (v1.1)
- [x] åŸºç¡€æ‰«æå’Œç»Ÿè®¡åŠŸèƒ½
- [x] ç»ˆç«¯å¯è§†åŒ–æŠ¥å‘Š
- [x] CSV/JSON å¯¼å‡º
- [x] é‡å¤æ–‡ä»¶æ£€æµ‹
- [x] ç¼“å­˜æœºåˆ¶åŠ é€ŸäºŒæ¬¡æ‰«æ
- [x] Rustæ¸…ç†å·¥å…·
- [x] WSLåˆ†æå·¥å…·

### è®¡åˆ’ä¸­
- [ ] HTMLå¯è§†åŒ–æŠ¥å‘Š
- [ ] å¿½ç•¥åˆ—è¡¨é…ç½®æ–‡ä»¶
- [ ] å®šæ—¶æ‰«æå’ŒæŠ¥å‘Š
- [ ] Webç•Œé¢
- [ ] å®æ—¶ç›‘æ§æ¨¡å¼
- [ ] äº‘å­˜å‚¨æ”¯æŒ
- [ ] æ–‡ä»¶å¹´é¾„åˆ†æ

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ï¼è¯·éšæ—¶æäº¤é—®é¢˜æˆ–æ‹‰å–è¯·æ±‚ã€‚

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯æ‹‰å–è¯·æ±‚

## ğŸ“ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ‘¨â€ğŸ’» ä½œè€…

**coo** - [@coo-2022](https://github.com/coo-2022)

## ğŸ™ è‡´è°¢

- çµæ„Ÿæ¥æºäº [ncdu](https://dev.yorhel.nl/ncdu) å’Œ [WinDirStat](https://windirstat.net/)
- æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…

## ğŸ“§ è”ç³»æ–¹å¼

- GitHub Issues: [æäº¤é—®é¢˜](https://github.com/coo-2022/DiskUsageAnalyzer/issues)

---

<div align="center">

**å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™å®ƒä¸€ä¸ªâ­ï¸**

Made with â¤ï¸ by [coo](https://github.com/coo-2022)

</div>
